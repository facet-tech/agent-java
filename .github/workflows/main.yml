name: java-agent

on:
  push:
    branches: [main]

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    - name: checkout
      uses: actions/checkout@v2

    - uses: burrunan/gradle-cache-action@v1
      name: build
      with:
        save-generated-gradle-jars: false
        remote-build-cache-proxy-enabled: false
        gradle-version: 6.7.1
        read-only: ${{ github.ref != 'refs/heads/main' }}
        arguments: shadowJar
        build-root-directory: build
        execution-only-caches: true
        save-local-build-cache: false
        save-gradle-dependencies-cache: false
        gradle-dependencies-cache-key: |
          gradle/dependencies.kt
          buildSrc/**/Version.kt
        save-maven-dependencies-cache: false
        maven-local-ignore-paths: |
          org/example/
          com/example/
        concurrent: true
        gradle-build-scan-report: false
        gradle-distribution-sha-256-sum-warning: false
